<div class="well background-lighter-grey">
    <%= form_for @project do |f| %>
        <%= render 'shared/error_messages', object: @project %>
    
        <%= render 'project_fields', f: f %>
        
        <h3>Tasks</h3>
        <%= f.fields_for :tasks do |builder| %>
            <%= render 'tasks/task_fields', f: builder %>
        <% end %>
    
        <%= link_to_add_fields 'Add Task', f, :tasks, { partial: 'tasks/task_fields' } %>
    
        <h3>Notes</h3>
        <%= f.fields_for :notes do |builder| %>
            <%= render 'notes/note_fields', f: builder %>
        <% end %>
    
        <%= link_to_add_fields 'Add Note', f, :notes, { partial: 'notes/note_fields' } %>
    
        <h3>Users</h3>
        <%= f.fields_for :users do |builder| %>
            <%= render 'nested/users/user_fields', f: builder, users: @users, target_resource: @project %>
        <% end %>
    
        <%= link_to_add_fields 'Add User', f, :users, { partial: 'nested/users/user_fields', locals: { users: @users, target_resource: @project } } %>
    
        <div class="actions">
          <%= f.submit %>
        </div>
    <% end %>
</div>

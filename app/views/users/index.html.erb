<% title('Users') %>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-10">
      <h1 class="no-margin">Users</h1>
    </div>
  
    <%= content_tag :div, class: "col-md-2 text-center" do %>
      <%= link_to new_user_registration_path do %>
        <%= fa_icon "plus", class: "btn btn-info" %>
      <% end %>
    <% end if current_user.admin? %>
  </div>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Status</th>
      <th>Email</th>
      <th>Role(s)</th>
      <% if current_user.admin? %>
      <th>Edit</th>
      <th>Delete</th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @users.map do |user| %>
      <% if local_assigns.has_key?(:role_type) && local_assigns.has_key?(:role_id) %>
        <%= render partial: 'users/user', locals: { user: user, role_type: role_type, role_id: role_id } %>
      <% else %>
        <%= render partial: 'users/user', locals: { user: user, role_type: nil, role_id: nil } %>
      <% end %>
    <% end %>
  </tbody>
</table>
